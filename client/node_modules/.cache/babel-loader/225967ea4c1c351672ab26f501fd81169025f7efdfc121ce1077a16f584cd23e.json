{"ast":null,"code":"var _jsxFileName = \"/Users/yusuf.karakaya/Desktop/LAB/portfolio/client/src/components/EditPost.jsx\",\n  _s = $RefreshSig$();\nimport ReactQuill from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\nimport { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst modules = {\n  toolbar: [[{\n    header: [1, 2, false]\n  }], ['bold', 'italic', 'underline', 'strike', 'blockquote'], [{\n    list: 'ordered'\n  }, {\n    list: 'bullet'\n  }, {\n    indent: '-1'\n  }, {\n    indent: '+1'\n  }], ['link', 'image'], ['clean']]\n};\nconst formats = ['header', 'bold', 'italic', 'underline', 'strike', 'blockquote', 'list', 'bullet', 'indent', 'link', 'image'];\nexport default function EditPost() {\n  _s();\n  const [title, setTitle] = useState('');\n  const [summary, setSummary] = useState('');\n  const [content, setContent] = useState('');\n  const [files, setFiles] = useState('');\n  const [redirect, setRedirect] = useState(false);\n  const {\n    id\n  } = useParams();\n  const [errors, setErrors] = useState([]);\n  const navigate = useNavigate();\n  useEffect(() => {\n    axios.get(`http://localhost:8000/api/getpost/${id}`).then(res => {\n      console.log(res.data);\n      setTitle(res.data.title);\n      setSummary(res.data.summary);\n      setContent(res.data.content);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, [id]);\n  async function updatePost(e) {\n    e.preventDefault();\n    const data = new FormData();\n    data.set('title', title);\n    data.set('summary', summary);\n    data.set('content', content);\n    data.set('file', files === null || files === void 0 ? void 0 : files[0]);\n    data.set('id', id);\n    axios.put('http://localhost:8000/api/updatepost/' + id, data, {\n      withCredentials: true\n    }).then(res => {\n      setRedirect(true);\n    }).catch(err => {\n      const errorResponse = err.response.data.errors;\n      const errorArr = [];\n      for (const key of Object.keys(errorResponse)) {\n        errorArr.push(errorResponse[key].message);\n      }\n      setErrors(errorArr);\n    });\n  }\n  if (redirect) {\n    navigate(`/detailpost/${id}`);\n  }\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"create-main\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Update Post\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"create-form\",\n      onSubmit: updatePost,\n      children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"error-validation\",\n        children: errors.map((err, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"error-message\",\n          children: err\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Title\",\n        value: title,\n        onChange: e => setTitle(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"summary\",\n        placeholder: \"Summary\",\n        value: summary,\n        onChange: e => setSummary(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: e => setFiles(e.target.files)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ReactQuill, {\n        modules: modules,\n        formats: formats,\n        value: content,\n        onChange: newValue => setContent(newValue)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Update\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n}\n_s(EditPost, \"txBsQ8Fj4sr/WV7ZixYCpOC9AI0=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = EditPost;\nvar _c;\n$RefreshReg$(_c, \"EditPost\");","map":{"version":3,"names":["ReactQuill","useState","useEffect","useParams","useNavigate","axios","jsxDEV","_jsxDEV","modules","toolbar","header","list","indent","formats","EditPost","_s","title","setTitle","summary","setSummary","content","setContent","files","setFiles","redirect","setRedirect","id","errors","setErrors","navigate","get","then","res","console","log","data","catch","err","updatePost","e","preventDefault","FormData","set","put","withCredentials","errorResponse","response","errorArr","key","Object","keys","push","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","map","index","type","placeholder","value","onChange","target","newValue","_c","$RefreshReg$"],"sources":["/Users/yusuf.karakaya/Desktop/LAB/portfolio/client/src/components/EditPost.jsx"],"sourcesContent":["import ReactQuill from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\nimport { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\n\nconst modules = {\n  toolbar: [\n    [{ header: [1, 2, false] }],\n    ['bold', 'italic', 'underline', 'strike', 'blockquote'],\n    [\n      { list: 'ordered' },\n      { list: 'bullet' },\n      { indent: '-1' },\n      { indent: '+1' },\n    ],\n    ['link', 'image'],\n    ['clean'],\n  ],\n};\nconst formats = [\n  'header',\n  'bold',\n  'italic',\n  'underline',\n  'strike',\n  'blockquote',\n  'list',\n  'bullet',\n  'indent',\n  'link',\n  'image',\n];\nexport default function EditPost() {\n  const [title, setTitle] = useState('');\n  const [summary, setSummary] = useState('');\n  const [content, setContent] = useState('');\n  const [files, setFiles] = useState('');\n  const [redirect, setRedirect] = useState(false);\n  const { id } = useParams();\n  const [errors, setErrors] = useState([]);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    axios\n      .get(`http://localhost:8000/api/getpost/${id}`)\n      .then((res) => {\n        console.log(res.data);\n        setTitle(res.data.title);\n        setSummary(res.data.summary);\n        setContent(res.data.content);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, [id]);\n\n  async function updatePost(e) {\n    e.preventDefault();\n    const data = new FormData();\n    data.set('title', title);\n    data.set('summary', summary);\n    data.set('content', content);\n    data.set('file', files?.[0]);\n    data.set('id', id);\n\n    axios\n      .put('http://localhost:8000/api/updatepost/' + id, data, {\n        withCredentials: true,\n      })\n      .then((res) => {\n        setRedirect(true);\n      })\n      .catch((err) => {\n        const errorResponse = err.response.data.errors;\n        const errorArr = [];\n        for (const key of Object.keys(errorResponse)) {\n          errorArr.push(errorResponse[key].message);\n        }\n        setErrors(errorArr);\n      });\n  }\n\n  if (redirect) {\n    navigate(`/detailpost/${id}`);\n  }\n\n  return (\n    <main className='create-main'>\n      <h1>Update Post</h1>\n      <form className='create-form' onSubmit={updatePost}>\n        <ul className='error-validation'>\n          {errors.map((err, index) => (\n            <li className='error-message' key={index}>\n              {err}\n            </li>\n          ))}\n        </ul>\n        <input\n          type='text'\n          placeholder='Title'\n          value={title}\n          onChange={(e) => setTitle(e.target.value)}\n        />\n        <input\n          type='summary'\n          placeholder='Summary'\n          value={summary}\n          onChange={(e) => setSummary(e.target.value)}\n        />\n        <input type='file' onChange={(e) => setFiles(e.target.files)} />\n        <ReactQuill\n          modules={modules}\n          formats={formats}\n          value={content}\n          onChange={(newValue) => setContent(newValue)}\n        />\n        <button type='submit'>Update</button>\n      </form>\n    </main>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}